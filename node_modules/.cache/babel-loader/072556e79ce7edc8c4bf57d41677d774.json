{"ast":null,"code":"import { error, isArray, isObject, stringValue } from 'vega-util';\nexport default function (proj, scope) {\n  var config = scope.config.projection || {},\n      params = {};\n\n  for (var name in proj) {\n    if (name === 'name') continue;\n    params[name] = parseParameter(proj[name], name, scope);\n  } // apply projection defaults from config\n\n\n  for (name in config) {\n    if (params[name] == null) {\n      params[name] = parseParameter(config[name], name, scope);\n    }\n  }\n\n  scope.addProjection(proj.name, params);\n}\n\nfunction parseParameter(_, name, scope) {\n  return isArray(_) ? _.map(function (_) {\n    return parseParameter(_, name, scope);\n  }) : !isObject(_) ? _ : _.signal ? scope.signalRef(_.signal) : name === 'fit' ? _ : error('Unsupported parameter object: ' + stringValue(_));\n}","map":null,"metadata":{},"sourceType":"module"}