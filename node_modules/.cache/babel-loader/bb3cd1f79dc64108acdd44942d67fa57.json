{"ast":null,"code":"/**\n * Open editor url in a new window, and pass a message.\n */\nexport default function (window, url, data) {\n  var editor = window.open(url);\n  var wait = 10000;\n  var step = 250; // eslint-disable-next-line no-bitwise\n\n  var count = ~~(wait / step);\n\n  function listen(evt) {\n    if (evt.source === editor) {\n      count = 0;\n      window.removeEventListener('message', listen, false);\n    }\n  }\n\n  window.addEventListener('message', listen, false); // send message\n  // periodically resend until ack received or timeout\n\n  function send() {\n    if (count <= 0) {\n      return;\n    }\n\n    editor.postMessage(data, '*');\n    setTimeout(send, step);\n    count -= 1;\n  }\n\n  setTimeout(send, step);\n}","map":null,"metadata":{},"sourceType":"module"}