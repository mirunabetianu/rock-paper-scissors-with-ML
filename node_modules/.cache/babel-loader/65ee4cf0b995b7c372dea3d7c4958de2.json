{"ast":null,"code":"import HierarchyLayout from './HierarchyLayout';\nimport { error, hasOwnProperty, inherits } from 'vega-util';\nimport { treemap, treemapBinary, treemapDice, treemapSlice, treemapSliceDice, treemapSquarify, treemapResquarify } from 'd3-hierarchy';\nvar Tiles = {\n  binary: treemapBinary,\n  dice: treemapDice,\n  slice: treemapSlice,\n  slicedice: treemapSliceDice,\n  squarify: treemapSquarify,\n  resquarify: treemapResquarify\n};\nvar Output = ['x0', 'y0', 'x1', 'y1', 'depth', 'children'];\n/**\n * Treemap layout.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {function(object): *} params.field - The value field to size nodes.\n */\n\nexport default function Treemap(params) {\n  HierarchyLayout.call(this, params);\n}\nTreemap.Definition = {\n  \"type\": \"Treemap\",\n  \"metadata\": {\n    \"tree\": true,\n    \"modifies\": true\n  },\n  \"params\": [{\n    \"name\": \"field\",\n    \"type\": \"field\"\n  }, {\n    \"name\": \"sort\",\n    \"type\": \"compare\"\n  }, {\n    \"name\": \"method\",\n    \"type\": \"enum\",\n    \"default\": \"squarify\",\n    \"values\": [\"squarify\", \"resquarify\", \"binary\", \"dice\", \"slice\", \"slicedice\"]\n  }, {\n    \"name\": \"padding\",\n    \"type\": \"number\",\n    \"default\": 0\n  }, {\n    \"name\": \"paddingInner\",\n    \"type\": \"number\",\n    \"default\": 0\n  }, {\n    \"name\": \"paddingOuter\",\n    \"type\": \"number\",\n    \"default\": 0\n  }, {\n    \"name\": \"paddingTop\",\n    \"type\": \"number\",\n    \"default\": 0\n  }, {\n    \"name\": \"paddingRight\",\n    \"type\": \"number\",\n    \"default\": 0\n  }, {\n    \"name\": \"paddingBottom\",\n    \"type\": \"number\",\n    \"default\": 0\n  }, {\n    \"name\": \"paddingLeft\",\n    \"type\": \"number\",\n    \"default\": 0\n  }, {\n    \"name\": \"ratio\",\n    \"type\": \"number\",\n    \"default\": 1.618033988749895\n  }, {\n    \"name\": \"round\",\n    \"type\": \"boolean\",\n    \"default\": false\n  }, {\n    \"name\": \"size\",\n    \"type\": \"number\",\n    \"array\": true,\n    \"length\": 2\n  }, {\n    \"name\": \"as\",\n    \"type\": \"string\",\n    \"array\": true,\n    \"length\": Output.length,\n    \"default\": Output\n  }]\n};\nvar prototype = inherits(Treemap, HierarchyLayout);\n/**\n * Treemap layout generator. Adds 'method' and 'ratio' parameters\n * to configure the underlying tile method.\n */\n\nprototype.layout = function () {\n  var x = treemap();\n\n  x.ratio = function (_) {\n    var t = x.tile();\n    if (t.ratio) x.tile(t.ratio(_));\n  };\n\n  x.method = function (_) {\n    if (hasOwnProperty(Tiles, _)) x.tile(Tiles[_]);else error('Unrecognized Treemap layout method: ' + _);\n  };\n\n  return x;\n};\n\nprototype.params = ['method', 'ratio', 'size', 'round', 'padding', 'paddingInner', 'paddingOuter', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft'];\nprototype.fields = Output;","map":null,"metadata":{},"sourceType":"module"}