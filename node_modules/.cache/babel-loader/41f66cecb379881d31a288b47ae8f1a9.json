{"ast":null,"code":"import _defineProperty from \"/Users/mirunabetianu/WebstormProjects/rps/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _localGet, _utcGet;\n\nimport { YEAR, QUARTER, MONTH, WEEK, DATE, DAY, HOURS, MINUTES, SECONDS, MILLISECONDS } from './units';\nimport { constant, one, peek, toSet, zero } from 'vega-util';\nimport { timeWeek, utcWeek } from 'd3-time';\nvar t0 = new Date();\n\nfunction floor(units, step, fn, newDate) {\n  var s = step || 1,\n      b = peek(units),\n      _ = function _(unit, p, key) {\n    return skip(fn[key || unit], unit === b && s, p);\n  };\n\n  var t = new Date(),\n      u = toSet(units),\n      y = u[YEAR] ? _(YEAR) : constant(2012),\n      m = u[MONTH] ? _(MONTH) : u[QUARTER] ? _(QUARTER) : zero,\n      d = u[WEEK] && u[DAY] ? _(DAY, 1, WEEK + DAY) : u[WEEK] ? _(WEEK, 1) : u[DAY] ? _(DAY, 1) : u[DATE] ? _(DATE, 1) : one,\n      H = u[HOURS] ? _(HOURS) : zero,\n      M = u[MINUTES] ? _(MINUTES) : zero,\n      S = u[SECONDS] ? _(SECONDS) : zero,\n      L = u[MILLISECONDS] ? _(MILLISECONDS) : zero;\n  return function (v) {\n    t.setTime(+v);\n    var year = y(t);\n    return newDate(year, m(t), d(t, year), H(t), M(t), S(t), L(t));\n  };\n}\n\nfunction skip(f, step, phase) {\n  return step <= 1 ? f : phase ? function (d, y) {\n    return phase + step * Math.floor((f(d, y) - phase) / step);\n  } : function (d, y) {\n    return step * Math.floor(f(d, y) / step);\n  };\n} // returns the day of the year based on week number, day of week,\n// and the day of the week for the first day of the year\n\n\nfunction weekday(week, day, firstDay) {\n  return day + week * 7 - (firstDay + 6) % 7;\n} // -- LOCAL TIME --\n\n\nvar localGet = (_localGet = {}, _defineProperty(_localGet, YEAR, function (d) {\n  return d.getFullYear();\n}), _defineProperty(_localGet, QUARTER, function (d) {\n  return 3 * ~~(d.getMonth() / 3);\n}), _defineProperty(_localGet, MONTH, function (d) {\n  return d.getMonth();\n}), _defineProperty(_localGet, DATE, function (d) {\n  return d.getDate();\n}), _defineProperty(_localGet, HOURS, function (d) {\n  return d.getHours();\n}), _defineProperty(_localGet, MINUTES, function (d) {\n  return d.getMinutes();\n}), _defineProperty(_localGet, SECONDS, function (d) {\n  return d.getSeconds();\n}), _defineProperty(_localGet, MILLISECONDS, function (d) {\n  return d.getMilliseconds();\n}), _defineProperty(_localGet, DAY, function (d, y) {\n  return weekday(1, d.getDay(), localFirst(y));\n}), _defineProperty(_localGet, WEEK, function (d, y) {\n  return weekday(localWeekNum(d), 0, localFirst(y));\n}), _defineProperty(_localGet, WEEK + DAY, function (d, y) {\n  return weekday(localWeekNum(d), d.getDay(), localFirst(y));\n}), _localGet);\n\nfunction localYear(y) {\n  t0.setFullYear(y);\n  t0.setMonth(0);\n  t0.setDate(1);\n  t0.setHours(0, 0, 0, 0);\n  return t0;\n}\n\nfunction localWeekNum(d) {\n  return timeWeek.count(localYear(d.getFullYear()) - 1, d);\n}\n\nfunction localFirst(y) {\n  return localYear(y).getDay();\n}\n\nfunction localDate(y, m, d, H, M, S, L) {\n  if (0 <= y && y < 100) {\n    var date = new Date(-1, m, d, H, M, S, L);\n    date.setFullYear(y);\n    return date;\n  }\n\n  return new Date(y, m, d, H, M, S, L);\n}\n\nexport function timeFloor(units, step) {\n  return floor(units, step || 1, localGet, localDate);\n} // -- UTC TIME --\n\nvar utcGet = (_utcGet = {}, _defineProperty(_utcGet, YEAR, function (d) {\n  return d.getUTCFullYear();\n}), _defineProperty(_utcGet, QUARTER, function (d) {\n  return 3 * ~~(d.getUTCMonth() / 3);\n}), _defineProperty(_utcGet, MONTH, function (d) {\n  return d.getUTCMonth();\n}), _defineProperty(_utcGet, DATE, function (d) {\n  return d.getUTCDate();\n}), _defineProperty(_utcGet, HOURS, function (d) {\n  return d.getUTCHours();\n}), _defineProperty(_utcGet, MINUTES, function (d) {\n  return d.getUTCMinutes();\n}), _defineProperty(_utcGet, SECONDS, function (d) {\n  return d.getUTCSeconds();\n}), _defineProperty(_utcGet, MILLISECONDS, function (d) {\n  return d.getUTCMilliseconds();\n}), _defineProperty(_utcGet, DAY, function (d, y) {\n  return weekday(1, d.getUTCDay(), utcFirst(y));\n}), _defineProperty(_utcGet, WEEK, function (d, y) {\n  return weekday(utcWeekNum(d), 0, utcFirst(y));\n}), _defineProperty(_utcGet, WEEK + DAY, function (d, y) {\n  return weekday(utcWeekNum(d), d.getUTCDay(), utcFirst(y));\n}), _utcGet);\n\nfunction utcWeekNum(d) {\n  var y = Date.UTC(d.getUTCFullYear(), 0, 1);\n  return utcWeek.count(y - 1, d);\n}\n\nfunction utcFirst(y) {\n  t0.setTime(Date.UTC(y, 0, 1));\n  return t0.getUTCDay();\n}\n\nfunction utcDate(y, m, d, H, M, S, L) {\n  if (0 <= y && y < 100) {\n    var date = new Date(Date.UTC(-1, m, d, H, M, S, L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n\n  return new Date(Date.UTC(y, m, d, H, M, S, L));\n}\n\nexport function utcFloor(units, step) {\n  return floor(units, step || 1, utcGet, utcDate);\n}","map":null,"metadata":{},"sourceType":"module"}