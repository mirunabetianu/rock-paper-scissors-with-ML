{"ast":null,"code":"import { GuideTitleStyle, zero, one } from './constants';\nimport guideMark from './guide-mark';\nimport { lookup, alignExpr, anchorExpr } from './guide-util';\nimport { TextMark } from '../marks/marktypes';\nimport { LegendTitleRole } from '../marks/roles';\nimport { addEncoders } from '../encode/encode-util'; // expression logic for align, anchor, angle, and baseline calculation\n\nvar isL = 'item.orient === \"left\"',\n    isR = 'item.orient === \"right\"',\n    isLR = \"(\".concat(isL, \" || \").concat(isR, \")\"),\n    isVG = \"datum.vgrad && \".concat(isLR),\n    baseline = anchorExpr('\"top\"', '\"bottom\"', '\"middle\"'),\n    alignFlip = anchorExpr('\"right\"', '\"left\"', '\"center\"'),\n    exprAlign = \"datum.vgrad && \".concat(isR, \" ? (\").concat(alignFlip, \") : (\").concat(isLR, \" && !(datum.vgrad && \").concat(isL, \")) ? \\\"left\\\" : \").concat(alignExpr),\n    exprAnchor = \"item._anchor || (\".concat(isLR, \" ? \\\"middle\\\" : \\\"start\\\")\"),\n    exprAngle = \"\".concat(isVG, \" ? (\").concat(isL, \" ? -90 : 90) : 0\"),\n    exprBaseline = \"\".concat(isLR, \" ? (datum.vgrad ? (\").concat(isR, \" ? \\\"bottom\\\" : \\\"top\\\") : \").concat(baseline, \") : \\\"top\\\"\");\nexport default function (spec, config, userEncode, dataRef) {\n  var _ = lookup(spec, config),\n      encode;\n\n  encode = {\n    enter: {\n      opacity: zero\n    },\n    update: {\n      opacity: one,\n      x: {\n        field: {\n          group: 'padding'\n        }\n      },\n      y: {\n        field: {\n          group: 'padding'\n        }\n      }\n    },\n    exit: {\n      opacity: zero\n    }\n  };\n  addEncoders(encode, {\n    orient: _('titleOrient'),\n    _anchor: _('titleAnchor'),\n    anchor: {\n      signal: exprAnchor\n    },\n    angle: {\n      signal: exprAngle\n    },\n    align: {\n      signal: exprAlign\n    },\n    baseline: {\n      signal: exprBaseline\n    },\n    text: spec.title,\n    fill: _('titleColor'),\n    fillOpacity: _('titleOpacity'),\n    font: _('titleFont'),\n    fontSize: _('titleFontSize'),\n    fontStyle: _('titleFontStyle'),\n    fontWeight: _('titleFontWeight'),\n    limit: _('titleLimit'),\n    lineHeight: _('titleLineHeight')\n  }, {\n    // require update\n    align: _('titleAlign'),\n    baseline: _('titleBaseline')\n  });\n  return guideMark(TextMark, LegendTitleRole, GuideTitleStyle, null, dataRef, encode, userEncode);\n}","map":null,"metadata":{},"sourceType":"module"}