{"ast":null,"code":"import _toConsumableArray from \"/Users/mirunabetianu/WebstormProjects/rps/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as log from '../log';\nimport { keys } from '../util';\nimport { CompositeMarkNormalizer } from './base';\nimport { makeCompositeAggregatePartFactory } from './common';\nimport { errorBarParams } from './errorbar';\nexport var ERRORBAND = 'errorband';\nvar ERRORBAND_PART_INDEX = {\n  band: 1,\n  borders: 1\n};\nexport var ERRORBAND_PARTS = keys(ERRORBAND_PART_INDEX);\nexport var errorBandNormalizer = new CompositeMarkNormalizer(ERRORBAND, normalizeErrorBand);\nexport function normalizeErrorBand(spec, _ref) {\n  var config = _ref.config;\n\n  var _errorBarParams = errorBarParams(spec, ERRORBAND, config),\n      transform = _errorBarParams.transform,\n      continuousAxisChannelDef = _errorBarParams.continuousAxisChannelDef,\n      continuousAxis = _errorBarParams.continuousAxis,\n      encodingWithoutContinuousAxis = _errorBarParams.encodingWithoutContinuousAxis,\n      markDef = _errorBarParams.markDef,\n      outerSpec = _errorBarParams.outerSpec,\n      tooltipEncoding = _errorBarParams.tooltipEncoding;\n\n  var errorBandDef = markDef;\n  var makeErrorBandPart = makeCompositeAggregatePartFactory(errorBandDef, continuousAxis, continuousAxisChannelDef, encodingWithoutContinuousAxis, config.errorband);\n  var is2D = spec.encoding.x !== undefined && spec.encoding.y !== undefined;\n  var bandMark = {\n    type: is2D ? 'area' : 'rect'\n  };\n  var bordersMark = {\n    type: is2D ? 'line' : 'rule'\n  };\n  var interpolate = Object.assign(Object.assign({}, errorBandDef.interpolate ? {\n    interpolate: errorBandDef.interpolate\n  } : {}), errorBandDef.tension && errorBandDef.interpolate ? {\n    interpolate: errorBandDef.tension\n  } : {});\n\n  if (is2D) {\n    bandMark = Object.assign(Object.assign({}, bandMark), interpolate);\n    bordersMark = Object.assign(Object.assign({}, bordersMark), interpolate);\n  } else if (errorBandDef.interpolate) {\n    log.warn(log.message.errorBand1DNotSupport('interpolate'));\n  } else if (errorBandDef.tension) {\n    log.warn(log.message.errorBand1DNotSupport('tension'));\n  }\n\n  return Object.assign(Object.assign({}, outerSpec), {\n    transform: transform,\n    layer: [].concat(_toConsumableArray(makeErrorBandPart({\n      partName: 'band',\n      mark: bandMark,\n      positionPrefix: 'lower',\n      endPositionPrefix: 'upper',\n      extraEncoding: tooltipEncoding\n    })), _toConsumableArray(makeErrorBandPart({\n      partName: 'borders',\n      mark: bordersMark,\n      positionPrefix: 'lower',\n      extraEncoding: tooltipEncoding\n    })), _toConsumableArray(makeErrorBandPart({\n      partName: 'borders',\n      mark: bordersMark,\n      positionPrefix: 'upper',\n      extraEncoding: tooltipEncoding\n    })))\n  });\n}","map":null,"metadata":{},"sourceType":"module"}