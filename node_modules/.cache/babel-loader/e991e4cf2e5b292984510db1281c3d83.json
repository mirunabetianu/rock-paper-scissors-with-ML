{"ast":null,"code":"import { Operator } from 'vega-dataflow';\nimport { inherits } from 'vega-util';\n/**\n * Provides a bridge between a parent transform and a target subflow that\n * consumes only a subset of the tuples that pass through the parent.\n * @constructor\n * @param {Pulse} pulse - A pulse to use as the value of this operator.\n * @param {Transform} parent - The parent transform (typically a Facet instance).\n * @param {Transform} target - A transform that receives the subflow of tuples.\n */\n\nexport default function Subflow(pulse, parent) {\n  Operator.call(this, pulse);\n  this.parent = parent;\n}\nvar prototype = inherits(Subflow, Operator);\n\nprototype.connect = function (target) {\n  this.targets().add(target);\n  return target.source = this;\n};\n/**\n * Add an 'add' tuple to the subflow pulse.\n * @param {Tuple} t - The tuple being added.\n */\n\n\nprototype.add = function (t) {\n  this.value.add.push(t);\n};\n/**\n * Add a 'rem' tuple to the subflow pulse.\n * @param {Tuple} t - The tuple being removed.\n */\n\n\nprototype.rem = function (t) {\n  this.value.rem.push(t);\n};\n/**\n * Add a 'mod' tuple to the subflow pulse.\n * @param {Tuple} t - The tuple being modified.\n */\n\n\nprototype.mod = function (t) {\n  this.value.mod.push(t);\n};\n/**\n * Re-initialize this operator's pulse value.\n * @param {Pulse} pulse - The pulse to copy from.\n * @see Pulse.init\n */\n\n\nprototype.init = function (pulse) {\n  this.value.init(pulse, pulse.NO_SOURCE);\n};\n/**\n * Evaluate this operator. This method overrides the\n * default behavior to simply return the contained pulse value.\n * @return {Pulse}\n */\n\n\nprototype.evaluate = function () {\n  // assert: this.value.stamp === pulse.stamp\n  return this.value;\n};","map":null,"metadata":{},"sourceType":"module"}