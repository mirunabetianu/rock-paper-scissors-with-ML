{"ast":null,"code":"import ols from './ols';\nimport { visitPoints } from './points';\nimport rSquared from './r-squared'; // Adapted from d3-regression by Harry Stevens\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nexport default function (data, x, y) {\n  var X = 0,\n      Y = 0,\n      XY = 0,\n      X2 = 0,\n      n = 0;\n  visitPoints(data, x, y, function (dx, dy) {\n    ++n;\n    dx = Math.log(dx);\n    X += (dx - X) / n;\n    Y += (dy - Y) / n;\n    XY += (dx * dy - XY) / n;\n    X2 += (dx * dx - X2) / n;\n  });\n\n  var coef = ols(X, Y, XY, X2),\n      predict = function predict(x) {\n    return coef[0] + coef[1] * Math.log(x);\n  };\n\n  return {\n    coef: coef,\n    predict: predict,\n    rSquared: rSquared(data, x, y, Y, predict)\n  };\n}","map":null,"metadata":{},"sourceType":"module"}