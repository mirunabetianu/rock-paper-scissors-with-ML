{"ast":null,"code":"import _toConsumableArray from \"/Users/mirunabetianu/WebstormProjects/rps/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { parse } from 'vega-expression';\n\nfunction getName(node) {\n  var name = [];\n\n  if (node.type === 'Identifier') {\n    return [node.name];\n  }\n\n  if (node.type === 'Literal') {\n    return [node.value];\n  }\n\n  if (node.type === 'MemberExpression') {\n    name.push.apply(name, _toConsumableArray(getName(node.object)));\n    name.push.apply(name, _toConsumableArray(getName(node.property)));\n  }\n\n  return name;\n}\n\nfunction startsWithDatum(node) {\n  if (node.object.type === 'MemberExpression') {\n    return startsWithDatum(node.object);\n  }\n\n  return node.object.name === 'datum';\n}\n\nexport function getDependentFields(expression) {\n  var ast = parse(expression);\n  var dependents = new Set();\n  ast.visit(function (node) {\n    if (node.type === 'MemberExpression' && startsWithDatum(node)) {\n      dependents.add(getName(node).slice(1).join('.'));\n    }\n  });\n  return dependents;\n}","map":null,"metadata":{},"sourceType":"module"}