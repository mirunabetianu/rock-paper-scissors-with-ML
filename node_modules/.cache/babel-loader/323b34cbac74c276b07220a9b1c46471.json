{"ast":null,"code":"import { ingest, Transform } from 'vega-dataflow';\nimport { inherits } from 'vega-util';\nimport { range } from 'd3-array';\n/**\n * Generates data tuples for a specified sequence range of numbers.\n * @constructor\n * @param {object} params - The parameters for this operator.\n * @param {number} params.start - The first number in the sequence.\n * @param {number} params.stop - The last number (exclusive) in the sequence.\n * @param {number} [params.step=1] - The step size between numbers in the sequence.\n */\n\nexport default function Sequence(params) {\n  Transform.call(this, null, params);\n}\nSequence.Definition = {\n  \"type\": \"Sequence\",\n  \"metadata\": {\n    \"generates\": true,\n    \"changes\": true\n  },\n  \"params\": [{\n    \"name\": \"start\",\n    \"type\": \"number\",\n    \"required\": true\n  }, {\n    \"name\": \"stop\",\n    \"type\": \"number\",\n    \"required\": true\n  }, {\n    \"name\": \"step\",\n    \"type\": \"number\",\n    \"default\": 1\n  }, {\n    \"name\": \"as\",\n    \"type\": \"string\",\n    \"default\": \"data\"\n  }]\n};\nvar prototype = inherits(Sequence, Transform);\n\nprototype.transform = function (_, pulse) {\n  if (this.value && !_.modified()) return;\n  var out = pulse.materialize().fork(pulse.MOD),\n      as = _.as || 'data';\n  out.rem = this.value ? pulse.rem.concat(this.value) : pulse.rem;\n  this.value = range(_.start, _.stop, _.step || 1).map(function (v) {\n    var t = {};\n    t[as] = v;\n    return ingest(t);\n  });\n  out.add = pulse.add.concat(this.value);\n  return out;\n};","map":null,"metadata":{},"sourceType":"module"}